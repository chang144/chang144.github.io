# 001 - Go命令行操作

## 0.1 构建并安装Go程序
+ `go build` 编译并安装自身包和依赖包

| 标记名称 | 标记描述                                                     |
| -------- | ------------------------------------------------------------ |
| -a       | 强行对所有涉及到的代码包（包含标准库中的代码包）进行重新构建，即使它们已经是最新的了。 |
| -n       | 打印编译期间所用到的其它命令，但是并不真正执行它们。         |
| -race    | 开启竞态条件的检测。不过此标记目前仅在`linux/amd64`、`freebsd/amd64`、`darwin/amd64`和`windows/amd64`平台下受到支持。 |
| -v       | 打印出那些被编译的代码包的名字。                             |
| -work    | 打印出编译时生成的临时工作目录的路径，并在编译结束时保留它。在默认情况下，编译结束时会删除该目录。 |
| -x       | 打印编译期间所用到的其它命令。注意它与`-n`标记的区别。       |

+ `go install` 安装自身包或者依赖包
+ `go get`根据需求从互联网（一般是从github）下载或者更新指定的代码包以及依赖包

| 标记名称  | 标记描述                                                     |
| --------- | ------------------------------------------------------------ |
| -d        | 让命令程序只执行下载动作，而不执行安装动作。                 |
| -f        | 仅在使用`-u`标记时才有效。该标记会让命令程序忽略掉对已下载代码包的导入路径的检查。如果下载并安装的代码包所属的项目是你从别人那里Fork过来的，那么这样做就尤为重要了。 |
| -fix      | 让命令程序在下载代码包后先执行修正动作，而后再进行编译和安装。 |
| -insecure | 允许命令程序使用非安全的scheme（如HTTP）去下载指定的代码包。如果你用的代码仓库（如公司内部的Gitlab）没有HTTPS支持，可以添加此标记。请在确定安全的情况下使用它。 |
| -t        | 让命令程序同时下载并安装指定的代码包中的测试源码文件中依赖的代码包。 |
| -u        | 让命令利用网络来更新已有代码包及其依赖包。默认情况下，该命令只会从网络上下载本地不存在的代码包，而不会更新已有的代码包。 |

+ `go clean`删除执行其它命令是产生的一些文件或者目录
+ `go run`编译并运行命令源文件，

使用`go run`时，如果在`package main`中有多个源文件，需要把这些源文件一起编译并运行

```bash
go run main.go main2.go # go run .
```

## 0.2 格式化代码

`go fmt` 这个工具可以将源代码格式化成符合官方统一标准的风格，**必须在编译或者提交版本管理系统之前使用`go fmt`来格式化代码**

`go fmt`命令的使用：

+ `gofmt -w program.go` 会格式化源代码文件并覆盖它，`-w`如果不加的话，只会打印格式化后的源代码并不会重写文件

+  `gofmt -w *.go0` 格式化并重写所有Go文件

+  `gofmt map1` 会格式化并重写map1目录以及其子目录下所有Go源文件

+  `gofmtr -r <原始内容> -> <替换内容>`其中`-r`可以实现源代码替换

  ```bash
  # 将源文件中没有意义的括号去掉
  gofmt -r '(a) -> a' –w *.go
  # 会将源文件中多余的 len(a) 去掉
  gofmt –r 'A.Func1(a,b) -> A.Func2(b,a)' –w *.go
  ```

## 0.3 生成代码文档
`go doc`工具会从Go程序和包文件中提取顶级声明的首行注释以及每个对象的相关注释，并生成相关文档

一般用法：

+ `go doc package`获取包的文档注释，例如`go doc fmt``
+ `go doc package/subpackage`获取子包的文档注释
+ `godoc --http=:6060`，可以在浏览器中打开**http://localhost:6060**，产看本地文档浏览服务器提供的页面

> 注意：godoc命令，我在go1.20.1版本下无法直接使用，原因目前未去探究；
>
> godoc在Go语言版本1.5中，是一个内置的标准命令

## 0.4 其它工具
+  `go fix` 将Go代码从旧的发行版本迁移到最近的发行版
+  `go test` 一个轻量级的单元测试框架
+ `go list`命令的作用是列出指定的代码包的信息
+ `go env`用于打印Go语言的环境信息

>  learning from ：[Go 命令教程 (hyper0x.github.io)](https://hyper0x.github.io/go_command_tutorial/#/)